// src/data/questionPool.js
// Curated Question Pool - 100% Quality Guaranteed

export const QUESTION_POOL = {
  de: [
    // MATHEMATIK
    { question: "Was ist 25% von 200?", topic: "Mathematik", answer: "50" },
    { question: "Wie viele Seiten hat ein Hexagon?", topic: "Mathematik", answer: "6" },
    { question: "Was ist die Quadratwurzel von 64?", topic: "Mathematik", answer: "8" },
    { question: "Wie viele Grad hat ein Vollkreis?", topic: "Mathematik", answer: "360" },
    { question: "Was ist 15% von 100?", topic: "Mathematik", answer: "15" },
    
    // CHEMIE
    { question: "Welches Element hat das Symbol Au?", topic: "Chemie", answer: "Gold" },
    { question: "Welches Element hat das Symbol Fe?", topic: "Chemie", answer: "Eisen" },
    { question: "Was ist die chemische Formel für Wasser?", topic: "Chemie", answer: "H2O" },
    { question: "Welches Gas nehmen Pflanzen für die Fotosynthese auf?", topic: "Chemie", answer: "Kohlendioxid" },
    { question: "Welches Element hat das Symbol O?", topic: "Chemie", answer: "Sauerstoff" },
    { question: "Welches Element hat das Symbol Na?", topic: "Chemie", answer: "Natrium" },
    { question: "Was ist die Formel für Kochsalz?", topic: "Chemie", answer: "NaCl" },
    
    // BIOLOGIE
    { question: "Welches Organ pumpt das Blut durch den Körper?", topic: "Biologie", answer: "Herz" },
    { question: "Wie viele Beine hat eine Spinne?", topic: "Biologie", answer: "8" },
    { question: "Wie viele Kammern hat ein menschliches Herz?", topic: "Biologie", answer: "4" },
    { question: "Welches Gas atmen Menschen ein?", topic: "Biologie", answer: "Sauerstoff" },
    { question: "Wie viele Beine hat ein Insekt?", topic: "Biologie", answer: "6" },
    { question: "Welches ist das größte Säugetier?", topic: "Biologie", answer: "Blauwal" },
    
    // ASTRONOMIE
    { question: "Welcher Planet ist der Sonne am nächsten?", topic: "Astronomie", answer: "Merkur" },
    { question: "Welcher ist der größte Planet im Sonnensystem?", topic: "Astronomie", answer: "Jupiter" },
    { question: "Wie heißt der natürliche Satellit der Erde?", topic: "Astronomie", answer: "Mond" },
    { question: "Welcher Planet ist als roter Planet bekannt?", topic: "Astronomie", answer: "Mars" },
    { question: "Welcher Planet hat die meisten Ringe?", topic: "Astronomie", answer: "Saturn" },
    
    // GEOGRAPHIE
    { question: "Was ist die Hauptstadt von Deutschland?", topic: "Geographie", answer: "Berlin" },
    { question: "Was ist die Hauptstadt von Frankreich?", topic: "Geographie", answer: "Paris" },
    { question: "Was ist die Hauptstadt von Italien?", topic: "Geographie", answer: "Rom" },
    { question: "Was ist die Hauptstadt von Australien?", topic: "Geographie", answer: "Canberra" },
    { question: "Welcher ist der längste Fluss der Welt?", topic: "Geographie", answer: "Nil" },
    { question: "Welcher ist der höchste Berg der Welt?", topic: "Geographie", answer: "Mount Everest" },
    { question: "Auf welchem Kontinent liegt Ägypten?", topic: "Geographie", answer: "Afrika" },
    
    // GESCHICHTE
    { question: "In welchem Jahr endete der Zweite Weltkrieg?", topic: "Geschichte", answer: "1945" },
    { question: "Wer entdeckte Amerika im Jahr 1492?", topic: "Geschichte", answer: "Kolumbus" },
    { question: "In welchem Jahr fiel die Berliner Mauer?", topic: "Geschichte", answer: "1989" },
    { question: "In welchem Jahr begann der Erste Weltkrieg?", topic: "Geschichte", answer: "1914" },
    { question: "Wer war der erste Mensch auf dem Mond?", topic: "Geschichte", answer: "Neil Armstrong" },
    
    // KUNST
    { question: "Wer malte die Mona Lisa?", topic: "Kunst", answer: "Leonardo da Vinci" },
    { question: "Wer malte das Bild 'Die Sternennacht'?", topic: "Kunst", answer: "Van Gogh" },
    { question: "Wer malte die Sixtinische Kapelle?", topic: "Kunst", answer: "Michelangelo" },
    { question: "Wer malte das Bild 'Guernica'?", topic: "Kunst", answer: "Picasso" },
    
    // LITERATUR
    { question: "Wer schrieb 'Romeo und Julia'?", topic: "Literatur", answer: "Shakespeare" },
    { question: "Wer schrieb 'Der kleine Prinz'?", topic: "Literatur", answer: "Antoine de Saint-Exupéry" },
    { question: "Wer schrieb 'Faust'?", topic: "Literatur", answer: "Goethe" },
    
    // MUSIK (NEU)
    { question: "Wer komponierte die 9. Sinfonie?", topic: "Musik", answer: "Beethoven" },
    { question: "Wer komponierte 'Eine kleine Nachtmusik'?", topic: "Musik", answer: "Mozart" },
    { question: "Wer komponierte 'Die vier Jahreszeiten'?", topic: "Musik", answer: "Vivaldi" }
  ],

  en: [
    // MATHEMATICS
    { question: "What is 25% of 200?", topic: "Mathematics", answer: "50" },
    { question: "How many sides does a hexagon have?", topic: "Mathematics", answer: "6" },
    { question: "What is the square root of 64?", topic: "Mathematics", answer: "8" },
    { question: "How many degrees are in a circle?", topic: "Mathematics", answer: "360" },
    { question: "What is 15% of 100?", topic: "Mathematics", answer: "15" },
    
    // CHEMISTRY
    { question: "Which element has the symbol Au?", topic: "Chemistry", answer: "Gold" },
    { question: "Which element has the symbol Fe?", topic: "Chemistry", answer: "Iron" },
    { question: "What is the chemical formula for water?", topic: "Chemistry", answer: "H2O" },
    { question: "Which gas do plants absorb for photosynthesis?", topic: "Chemistry", answer: "Carbon dioxide" },
    { question: "Which element has the symbol O?", topic: "Chemistry", answer: "Oxygen" },
    
    // BIOLOGY
    { question: "Which organ pumps blood through the body?", topic: "Biology", answer: "Heart" },
    { question: "How many legs does a spider have?", topic: "Biology", answer: "8" },
    { question: "How many chambers does a human heart have?", topic: "Biology", answer: "4" },
    { question: "Which gas do humans breathe in?", topic: "Biology", answer: "Oxygen" },
    { question: "How many legs does an insect have?", topic: "Biology", answer: "6" },
    
    // ASTRONOMY
    { question: "Which planet is closest to the sun?", topic: "Astronomy", answer: "Mercury" },
    { question: "Which is the largest planet in our solar system?", topic: "Astronomy", answer: "Jupiter" },
    { question: "What is Earth's natural satellite called?", topic: "Astronomy", answer: "Moon" },
    { question: "Which planet is known as the red planet?", topic: "Astronomy", answer: "Mars" },
    
    // GEOGRAPHY
    { question: "What is the capital of Germany?", topic: "Geography", answer: "Berlin" },
    { question: "What is the capital of France?", topic: "Geography", answer: "Paris" },
    { question: "What is the capital of Australia?", topic: "Geography", answer: "Canberra" },
    { question: "Which is the longest river in the world?", topic: "Geography", answer: "Nile" },
    { question: "Which is the highest mountain in the world?", topic: "Geography", answer: "Mount Everest" },
    
    // HISTORY
    { question: "In which year did World War II end?", topic: "History", answer: "1945" },
    { question: "Who discovered America in 1492?", topic: "History", answer: "Columbus" },
    { question: "Who was the first person on the moon?", topic: "History", answer: "Neil Armstrong" },
    
    // ART
    { question: "Who painted the Mona Lisa?", topic: "Art", answer: "Leonardo da Vinci" },
    { question: "Who painted 'Starry Night'?", topic: "Art", answer: "Van Gogh" },
    { question: "Who painted the Sistine Chapel?", topic: "Art", answer: "Michelangelo" },
    
    // LITERATURE
    { question: "Who wrote 'Romeo and Juliet'?", topic: "Literature", answer: "Shakespeare" },
    { question: "Who wrote 'The Little Prince'?", topic: "Literature", answer: "Antoine de Saint-Exupéry" },
    
    // MUSIC (NEW)
    { question: "Who composed the 9th Symphony?", topic: "Music", answer: "Beethoven" },
    { question: "Who composed 'Eine kleine Nachtmusik'?", topic: "Music", answer: "Mozart" },
    { question: "Who composed 'The Four Seasons'?", topic: "Music", answer: "Vivaldi" }
  ],

  es: [
    // MATEMÁTICAS
    { question: "¿Cuánto es el 25% de 200?", topic: "Matemáticas", answer: "50" },
    { question: "¿Cuántos lados tiene un hexágono?", topic: "Matemáticas", answer: "6" },
    { question: "¿Cuál es la raíz cuadrada de 64?", topic: "Matemáticas", answer: "8" },
    { question: "¿Cuántos grados tiene un círculo completo?", topic: "Matemáticas", answer: "360" },
    
    // QUÍMICA
    { question: "¿Qué elemento tiene el símbolo Au?", topic: "Química", answer: "Oro" },
    { question: "¿Qué elemento tiene el símbolo Fe?", topic: "Química", answer: "Hierro" },
    { question: "¿Cuál es la fórmula química del agua?", topic: "Química", answer: "H2O" },
    { question: "¿Qué gas absorben las plantas para la fotosíntesis?", topic: "Química", answer: "Dióxido de carbono" },
    
    // BIOLOGÍA
    { question: "¿Qué órgano bombea la sangre por el cuerpo?", topic: "Biología", answer: "Corazón" },
    { question: "¿Cuántas patas tiene una araña?", topic: "Biología", answer: "8" },
    { question: "¿Cuántas cámaras tiene el corazón humano?", topic: "Biología", answer: "4" },
    { question: "¿Qué gas respiran los humanos?", topic: "Biología", answer: "Oxígeno" },
    
    // ASTRONOMÍA
    { question: "¿Qué planeta está más cerca del sol?", topic: "Astronomía", answer: "Mercurio" },
    { question: "¿Cuál es el planeta más grande del sistema solar?", topic: "Astronomía", answer: "Júpiter" },
    { question: "¿Cómo se llama el satélite natural de la Tierra?", topic: "Astronomía", answer: "Luna" },
    { question: "¿Qué planeta se conoce como el planeta rojo?", topic: "Astronomía", answer: "Marte" },
    
    // GEOGRAFÍA
    { question: "¿Cuál es la capital de Alemania?", topic: "Geografía", answer: "Berlín" },
    { question: "¿Cuál es la capital de Francia?", topic: "Geografía", answer: "París" },
    { question: "¿Cuál es la capital de Australia?", topic: "Geografía", answer: "Canberra" },
    { question: "¿Cuál es el río más largo del mundo?", topic: "Geografía", answer: "Nilo" },
    
    // HISTORIA
    { question: "¿En qué año terminó la Segunda Guerra Mundial?", topic: "Historia", answer: "1945" },
    { question: "¿Quién descubrió América en 1492?", topic: "Historia", answer: "Colón" },
    { question: "¿Quién fue la primera persona en la luna?", topic: "Historia", answer: "Neil Armstrong" },
    
    // ARTE
    { question: "¿Quién pintó la Mona Lisa?", topic: "Arte", answer: "Leonardo da Vinci" },
    { question: "¿Quién pintó 'La noche estrellada'?", topic: "Arte", answer: "Van Gogh" },
    { question: "¿Quién pintó la Capilla Sixtina?", topic: "Arte", answer: "Miguel Ángel" },
    
    // LITERATURA
    { question: "¿Quién escribió 'Romeo y Julieta'?", topic: "Literatura", answer: "Shakespeare" },
    { question: "¿Quién escribió 'El Principito'?", topic: "Literatura", answer: "Antoine de Saint-Exupéry" },
    
    // MÚSICA (NUEVO)
    { question: "¿Quién compuso la 9ª Sinfonía?", topic: "Música", answer: "Beethoven" },
    { question: "¿Quién compuso 'Una pequeña serenata nocturna'?", topic: "Música", answer: "Mozart" },
    { question: "¿Quién compuso 'Las cuatro estaciones'?", topic: "Música", answer: "Vivaldi" }
  ],

  fr: [
    // MATHÉMATIQUES
    { question: "Combien font 25% de 200?", topic: "Mathématiques", answer: "50" },
    { question: "Combien de côtés a un hexagone?", topic: "Mathématiques", answer: "6" },
    { question: "Quelle est la racine carrée de 64?", topic: "Mathématiques", answer: "8" },
    { question: "Combien de degrés y a-t-il dans un cercle?", topic: "Mathématiques", answer: "360" },
    { question: "Combien font 15% de 100?", topic: "Mathématiques", answer: "15" },
    
    // CHIMIE
    { question: "Quel élément a le symbole Au?", topic: "Chimie", answer: "Or" },
    { question: "Quel élément a le symbole Fe?", topic: "Chimie", answer: "Fer" },
    { question: "Quelle est la formule chimique de l'eau?", topic: "Chimie", answer: "H2O" },
    { question: "Quel gaz les plantes absorbent-elles pour la photosynthèse?", topic: "Chimie", answer: "Dioxyde de carbone" },
    { question: "Quel élément a le symbole O?", topic: "Chimie", answer: "Oxygène" },
    { question: "Quel élément a le symbole Na?", topic: "Chimie", answer: "Sodium" },
    
    // BIOLOGIE
    { question: "Quel organe pompe le sang dans le corps?", topic: "Biologie", answer: "Cœur" },
    { question: "Combien de pattes a une araignée?", topic: "Biologie", answer: "8" },
    { question: "Combien de chambres a le cœur humain?", topic: "Biologie", answer: "4" },
    { question: "Quel gaz les humains respirent-ils?", topic: "Biologie", answer: "Oxygène" },
    { question: "Combien de pattes a un insecte?", topic: "Biologie", answer: "6" },
    { question: "Quel est le plus grand mammifère?", topic: "Biologie", answer: "Baleine bleue" },
    
    // ASTRONOMIE
    { question: "Quelle planète est la plus proche du soleil?", topic: "Astronomie", answer: "Mercure" },
    { question: "Quelle est la plus grande planète du système solaire?", topic: "Astronomie", answer: "Jupiter" },
    { question: "Comment s'appelle le satellite naturel de la Terre?", topic: "Astronomie", answer: "Lune" },
    { question: "Quelle planète est connue comme la planète rouge?", topic: "Astronomie", answer: "Mars" },
    { question: "Quelle planète a le plus d'anneaux?", topic: "Astronomie", answer: "Saturne" },
    
    // GÉOGRAPHIE
    { question: "Quelle est la capitale de l'Allemagne?", topic: "Géographie", answer: "Berlin" },
    { question: "Quelle est la capitale de la France?", topic: "Géographie", answer: "Paris" },
    { question: "Quelle est la capitale de l'Italie?", topic: "Géographie", answer: "Rome" },
    { question: "Quelle est la capitale de l'Australie?", topic: "Géographie", answer: "Canberra" },
    { question: "Quel est le plus long fleuve du monde?", topic: "Géographie", answer: "Nil" },
    { question: "Quelle est la plus haute montagne du monde?", topic: "Géographie", answer: "Mont Everest" },
    { question: "Sur quel continent se trouve l'Égypte?", topic: "Géographie", answer: "Afrique" },
    
    // HISTOIRE
    { question: "En quelle année la Seconde Guerre mondiale s'est-elle terminée?", topic: "Histoire", answer: "1945" },
    { question: "Qui a découvert l'Amérique en 1492?", topic: "Histoire", answer: "Colomb" },
    { question: "Qui a été la première personne sur la lune?", topic: "Histoire", answer: "Neil Armstrong" },
    { question: "En quelle année le mur de Berlin est-il tombé?", topic: "Histoire", answer: "1989" },
    
    // ART
    { question: "Qui a peint la Joconde?", topic: "Art", answer: "Léonard de Vinci" },
    { question: "Qui a peint 'La Nuit étoilée'?", topic: "Art", answer: "Van Gogh" },
    { question: "Qui a peint la chapelle Sixtine?", topic: "Art", answer: "Michel-Ange" },
    { question: "Qui a peint 'Guernica'?", topic: "Art", answer: "Picasso" },
    
    // LITTÉRATURE
    { question: "Qui a écrit 'Roméo et Juliette'?", topic: "Littérature", answer: "Shakespeare" },
    { question: "Qui a écrit 'Le Petit Prince'?", topic: "Littérature", answer: "Antoine de Saint-Exupéry" },
    
    // MUSIQUE (NOUVEAU)
    { question: "Qui a composé la 9e Symphonie?", topic: "Musique", answer: "Beethoven" },
    { question: "Qui a composé 'Une petite musique de nuit'?", topic: "Musique", answer: "Mozart" },
    { question: "Qui a composé 'Les Quatre Saisons'?", topic: "Musique", answer: "Vivaldi" }
  ],

  it: [
    // MATEMATICA
    { question: "Quanto fa il 25% di 200?", topic: "Matematica", answer: "50" },
    { question: "Quanti lati ha un esagono?", topic: "Matematica", answer: "6" },
    { question: "Qual è la radice quadrata di 64?", topic: "Matematica", answer: "8" },
    { question: "Quanti gradi ci sono in un cerchio?", topic: "Matematica", answer: "360" },
    { question: "Quanto fa il 15% di 100?", topic: "Matematica", answer: "15" },
    
    // CHIMICA
    { question: "Quale elemento ha il simbolo Au?", topic: "Chimica", answer: "Oro" },
    { question: "Quale elemento ha il simbolo Fe?", topic: "Chimica", answer: "Ferro" },
    { question: "Qual è la formula chimica dell'acqua?", topic: "Chimica", answer: "H2O" },
    { question: "Quale gas assorbono le piante per la fotosintesi?", topic: "Chimica", answer: "Anidride carbonica" },
    { question: "Quale elemento ha il simbolo O?", topic: "Chimica", answer: "Ossigeno" },
    { question: "Quale elemento ha il simbolo Na?", topic: "Chimica", answer: "Sodio" },
    
    // BIOLOGIA
    { question: "Quale organo pompa il sangue nel corpo?", topic: "Biologia", answer: "Cuore" },
    { question: "Quante zampe ha un ragno?", topic: "Biologia", answer: "8" },
    { question: "Quante camere ha il cuore umano?", topic: "Biologia", answer: "4" },
    { question: "Quale gas respirano gli esseri umani?", topic: "Biologia", answer: "Ossigeno" },
    { question: "Quante zampe ha un insetto?", topic: "Biologia", answer: "6" },
    { question: "Qual è il mammifero più grande?", topic: "Biologia", answer: "Balenottera azzurra" },
    
    // ASTRONOMIA
    { question: "Quale pianeta è più vicino al sole?", topic: "Astronomia", answer: "Mercurio" },
    { question: "Qual è il pianeta più grande del sistema solare?", topic: "Astronomia", answer: "Giove" },
    { question: "Come si chiama il satellite naturale della Terra?", topic: "Astronomia", answer: "Luna" },
    { question: "Quale pianeta è conosciuto come il pianeta rosso?", topic: "Astronomia", answer: "Marte" },
    { question: "Quale pianeta ha più anelli?", topic: "Astronomia", answer: "Saturno" },
    
    // GEOGRAFIA
    { question: "Qual è la capitale della Germania?", topic: "Geografia", answer: "Berlino" },
    { question: "Qual è la capitale della Francia?", topic: "Geografia", answer: "Parigi" },
    { question: "Qual è la capitale dell'Italia?", topic: "Geografia", answer: "Roma" },
    { question: "Qual è la capitale dell'Australia?", topic: "Geografia", answer: "Canberra" },
    { question: "Qual è il fiume più lungo del mondo?", topic: "Geografia", answer: "Nilo" },
    { question: "Qual è la montagna più alta del mondo?", topic: "Geografia", answer: "Monte Everest" },
    { question: "In quale continente si trova l'Egitto?", topic: "Geografia", answer: "Africa" },
    
    // STORIA
    { question: "In che anno è finita la Seconda Guerra Mondiale?", topic: "Storia", answer: "1945" },
    { question: "Chi ha scoperto l'America nel 1492?", topic: "Storia", answer: "Colombo" },
    { question: "Chi è stata la prima persona sulla luna?", topic: "Storia", answer: "Neil Armstrong" },
    { question: "In che anno è caduto il muro di Berlino?", topic: "Storia", answer: "1989" },
    
    // ARTE
    { question: "Chi ha dipinto la Gioconda?", topic: "Arte", answer: "Leonardo da Vinci" },
    { question: "Chi ha dipinto 'La notte stellata'?", topic: "Arte", answer: "Van Gogh" },
    { question: "Chi ha dipinto la Cappella Sistina?", topic: "Arte", answer: "Michelangelo" },
    { question: "Chi ha dipinto 'Guernica'?", topic: "Arte", answer: "Picasso" },
    
    // LETTERATURA
    { question: "Chi ha scritto 'Romeo e Giulietta'?", topic: "Letteratura", answer: "Shakespeare" },
    { question: "Chi ha scritto 'Il Piccolo Principe'?", topic: "Letteratura", answer: "Antoine de Saint-Exupéry" },
    
    // MUSICA (NUOVO)
    { question: "Chi ha composto la 9ª Sinfonia?", topic: "Musica", answer: "Beethoven" },
    { question: "Chi ha composto 'Eine kleine Nachtmusik'?", topic: "Musica", answer: "Mozart" },
    { question: "Chi ha composto 'Le Quattro Stagioni'?", topic: "Musica", answer: "Vivaldi" }
  ]
};

// NEUE INTELLIGENTE GRUPPENVERTEILUNG
const TOPIC_GROUPS = {
"MINT": {
  en: ["Mathematics", "Astronomy"],
  de: ["Mathematik", "Astronomie"],
  fr: ["Mathématiques", "Astronomie"],
  es: ["Matemáticas", "Astronomía"],
  it: ["Matematica", "Astronomia"]
},
"Geschichte": {
  en: ["History"],
  de: ["Geschichte"],
  fr: ["Histoire"],
  es: ["Historia"],
  it: ["Storia"]
},
"Geographie": {
  en: ["Geography"],
  de: ["Geographie"],
  fr: ["Géographie"],
  es: ["Geografía"],
  it: ["Geografia"]
},
"Kunst & Kultur": {
  en: ["Art", "Literature", "Music"],
  de: ["Kunst", "Literatur", "Musik"],
  fr: ["Art", "Littérature", "Musique"],
  es: ["Arte", "Literatura", "Música"],
  it: ["Arte", "Letteratura", "Musica"]
},
"Naturwissenschaften": {
  en: ["Biology", "Chemistry"],
  de: ["Biologie", "Chemie"],
  fr: ["Biologie", "Chimie"],
  es: ["Biología", "Química"],
  it: ["Biologia", "Chimica"]
}
};

// NEUE INTELLIGENTE QUESTION SELECTION
export const getRandomQuestionsFromPool = (language, count = 20) => {
const pool = QUESTION_POOL[language.toLowerCase()] || QUESTION_POOL.en;
const langCode = language.toLowerCase();

console.log(`🎯 INTELLIGENTE GRUPPENVERTEILUNG für ${language} (${count} Fragen)`);

// Ziel: 5 Gruppen mit je 4 Fragen (bei 20 total)
const questionsPerGroup = Math.floor(count / 5); // 4 Fragen pro Gruppe
const extraQuestions = count % 5; // Rest verteilen

const selectedQuestions = [];
const groupStats = {};

// Für jede Gruppe Fragen auswählen
Object.entries(TOPIC_GROUPS).forEach(([groupName, topics], groupIndex) => {
  const topicsForLang = topics[langCode] || topics.en || [];
  
  // Alle verfügbaren Fragen für diese Gruppe sammeln
  const groupQuestions = pool.filter(q => 
    topicsForLang.some(topic => topic.toLowerCase() === q.topic.toLowerCase())
  );
  
  // Anzahl Fragen für diese Gruppe berechnen
  let targetCount = questionsPerGroup;
  if (groupIndex < extraQuestions) {
    targetCount += 1; // Erste Gruppen bekommen die Extra-Fragen
  }
  
  // Zufällige Auswahl aus der Gruppe
  const shuffledGroupQuestions = shuffleArray([...groupQuestions]);
  const selectedFromGroup = shuffledGroupQuestions.slice(0, Math.min(targetCount, shuffledGroupQuestions.length));
  
  selectedQuestions.push(...selectedFromGroup);
  groupStats[groupName] = selectedFromGroup.length;
  
  console.log(`📚 ${groupName}: ${selectedFromGroup.length} Fragen aus [${topicsForLang.join(', ')}]`);
});

console.log(`✅ FINALE VERTEILUNG:`, groupStats);
console.log(`📊 Total: ${selectedQuestions.length}/${count} Fragen`);

// Falls noch Fragen fehlen, fülle mit zufälligen Fragen auf
if (selectedQuestions.length < count) {
  const usedQuestions = new Set(selectedQuestions.map(q => q.question));
  const remainingQuestions = pool.filter(q => !usedQuestions.has(q.question));
  const additionalNeeded = count - selectedQuestions.length;
  
  const shuffledRemaining = shuffleArray(remainingQuestions);
  selectedQuestions.push(...shuffledRemaining.slice(0, additionalNeeded));
  
  console.log(`🔄 Zusätzlich ${additionalNeeded} Fragen hinzugefügt`);
}

// Final shuffle für gute Mischung
return shuffleArray(selectedQuestions);
};

// Pool-Statistiken
export const getPoolStats = () => {
const stats = {};
Object.keys(QUESTION_POOL).forEach(lang => {
  stats[lang] = QUESTION_POOL[lang].length;
});
return stats;
};

// Shuffle-Funktion
const shuffleArray = (array) => {
const shuffled = [...array];
for (let i = shuffled.length - 1; i > 0; i--) {
  const j = Math.floor(Math.random() * (i + 1));
  [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
}
return shuffled;
};

// Fragen nach Topic filtern
export const getQuestionsByTopic = (language, topic) => {
const pool = QUESTION_POOL[language.toLowerCase()] || QUESTION_POOL.en;
return pool.filter(q => q.topic === topic);
};

// Alle verfügbaren Topics für eine Sprache
export const getAvailableTopics = (language) => {
const pool = QUESTION_POOL[language.toLowerCase()] || QUESTION_POOL.en;
return [...new Set(pool.map(q => q.topic))];
};

// NEUE FUNKTION: Topic-Gruppen für ResultsScreen
export const getTopicGroups = () => {
return TOPIC_GROUPS;
};